<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Adding Namecheap email address via AWS hosted Zone</title>
  <meta name="description"
        content="I like smart email addresses. Since my last name starts with an ‘a’, I figured I’d register the nifty personal email address anton@mlinger.com to be like oth...">

  <link type="text/css" rel="stylesheet" href="/assets/main-4001e27f649a4835ccf187acfeccdd1e42b20455e479d97c16d55121786278a5.css">

  <link rel="canonical"
        href="https://blog.amlinger.me/devops/2017/04/23/adding-namecheap-email-address-via-aws-hosted-zone.html">
  <link rel="alternate"
        title="Anton Amlinger"
        type="application/rss+xml"
        href="https://blog.amlinger.me/feed.xml">

  

  <link rel="shortcut icon"
        href="///gravatar.com/avatar/38ff9c0b0b99ac112b8d6e18b0947fa1?s=16" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-99137901-1', 'auto');
    ga('send', 'pageview');
  </script>
</head>

  <body>
    <aside class="sidebar">
  <div class="sidebar__content">
    <div class="sidebar__author pull--right">
      <div class="avatar">
  <span class="avatar__gravatar img--rounded">
    <img class="img-fill"
         src="///gravatar.com/avatar/38ff9c0b0b99ac112b8d6e18b0947fa1?s=50" />
  </span>
  <span class="avatar__name">
    <span class="avatar__firstname">
      Anton
    </span>
    <span class="avatar__lastname">
      Amlinger
    </span>
  </span>
</div>

      <p class="sidebar__introduction">
        Hi. My name is Anton Amlinger, and I am a software developer.
        This is a place where I write about things I like.
      </p>
    </div>

    <ul class="sidebar__contact">
      <li class="sidebar__contact-item">
        <a href="/feed.xml">
          <span class="icon icon--rss"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 486.392 486.392" style="enable-background:new 0 0 486.392 486.392;" xml:space="preserve" width="512px" height="512px">
<g>
<path d="M0.182,0v93.266c216.505,0,392.7,176.378,392.7,393.126h93.509 C486.392,218.268,268.245,0,0.182,0z" fill="#FFFFFF"/>
<path d="M0.061,165.221v93.235c60.708,0,117.768,23.742,160.752,66.757 c42.924,42.894,66.636,100.227,66.636,161.178h93.661C321.11,309.284,177.047,165.221,0.061,165.221z" fill="#FFFFFF"/>
<path d="M64.751,356.647C29.031,356.647,0,385.739,0,421.245c0,35.719,29.031,64.538,64.751,64.538 c35.841,0,64.842-28.819,64.842-64.538C129.563,385.8,100.592,356.647,64.751,356.647z" fill="#FFFFFF"/>
</g>
</svg>
</span>
        </a>
      </li>
      <li class="sidebar__contact-item">
        <a href="mailto:anton@mlinger.com">
          <span class="icon icon--mail"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve">
<g>
	<path d="M306.768,346.814h0.131c4.615,0,9.176-1.339,12.866-3.777l1.001-0.643c0.218-0.142,0.446-0.271,0.675-0.424l11.658-9.645   l278.259-229.624c-0.576-0.795-1.557-1.339-2.602-1.339H3.233c-0.751,0-1.448,0.272-2.003,0.729l291.125,239.954   C296.024,345.083,301.259,346.814,306.768,346.814z M0,133.899v340.37l208.55-168.471L0,133.899z M403.668,306.941L612,474.356   V135.031L403.668,306.941z M337.431,361.585c-8.305,6.814-19.168,10.57-30.576,10.57c-11.451,0-22.304-3.734-30.587-10.516   l-47.765-39.394L0,506.806v0.587c0,1.753,1.502,3.244,3.276,3.244h605.491c1.741,0,3.232-1.491,3.232-3.255v-0.544L383.693,323.4   L337.431,361.585z" fill="#FFFFFF"/>
</g>
</svg>
</span>
        </a>
      </li>
      <li class="sidebar__contact-item">
        <a href="//github.com/amlinger"
           target="blank">
          <span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span>
        </a>
      </li>
      <li class="sidebar__contact-item">
        <a href="//twitter.com/antonamlinger"
           target="blank">
          <span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span>
        </a>
      </li>
      <li class="sidebar__contact-item">
        <a href="//linkedin.com/in/anton-amlinger-8347a577"
           target="blank">
          <span class="icon icon--linkedin"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 97.75 97.75" style="enable-background:new 0 0 97.75 97.75;" xml:space="preserve">
<g>
	<path d="M48.875,0C21.882,0,0,21.882,0,48.875S21.882,97.75,48.875,97.75S97.75,75.868,97.75,48.875S75.868,0,48.875,0z    M30.562,81.966h-13.74V37.758h13.74V81.966z M23.695,31.715c-4.404,0-7.969-3.57-7.969-7.968c0.001-4.394,3.565-7.964,7.969-7.964   c4.392,0,7.962,3.57,7.962,7.964C31.657,28.146,28.086,31.715,23.695,31.715z M82.023,81.966H68.294V60.467   c0-5.127-0.095-11.721-7.142-11.721c-7.146,0-8.245,5.584-8.245,11.35v21.869H39.179V37.758h13.178v6.041h0.185   c1.835-3.476,6.315-7.14,13-7.14c13.913,0,16.481,9.156,16.481,21.059V81.966z" fill="#FFFFFF"/>
</g>
</svg>
</span>
        </a>
      </li>
    </ul>
    <div class="sidebar__background background--gradient">
    </div>
  </div>
</aside>

    <div class="page-content">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title"
        itemprop="name headline">
      Adding Namecheap email address via AWS hosted Zone
    </h1>
    <p class="post-meta">
      <time datetime="2017-04-23T09:00:00+00:00"
            itemprop="datePublished">
        Apr 23, 2017
      </time>
      
    </p>
  </header>

  <div class="post-content"
       itemprop="articleBody">
    <p>I like smart email addresses. Since my last name starts with an ‘a’, I figured I’d register the nifty personal email address <code>anton@mlinger.com</code> to be like other cool developers. This is a write-up on how to reproduce this for other domains as well.</p>

<p><a href="https://www.namecheap.com/">Namecheap</a> is usually my goto place for domains. They got a pretty user-friendly interface as well as a nice and fast customer support. So I naturally grabbed the domain mlinger.com from there.</p>

<h3 id="setting-up-a-hosted-zone">Setting up a Hosted Zone</h3>

<p>As I manage most of my domains through AWS, I decided to setup the domain in Route 53 as a hosted zone. This can be done by logging into your AWS account, going to <code>Route 53</code> &gt; <code>Hosted Zones</code> &gt; <code>Create Hosted Zone</code>, enter the domain that you own, any comment about the hosted zone, and leave the type as is to be able to access it from the public Internet. <em><a href="http://techgenix.com/namecheap-aws-ec2-linux/">This TechGenix</a> page provides a more detailed description of the way to go about this.</em></p>

<p>You’ll notice that AWS already has setup Name Server records for this hosted zone (I’ve always had trouble remembering what all DNS record names do, so at the end I’ve put a table explaining the records in this post). We’ll need to copy the value of these to Namecheap, to let it know that the domain should be handled by AWS name servers. The value of the <code>NS</code> record should look something like the following, but will most likely be different for each hosted zone:</p>
<pre><code>ns-888.awsdns-47.net.
ns-1506.awsdns-60.org.
ns-472.awsdns-59.com.
ns-1771.awsdns-29.co.uk.
</code></pre>

<p>Note these values, and head over to Namecheap. Go to <code>Domain List</code> &gt; <code>mlinger.com</code> and have a look under <code>Nameservers</code>. Change the value to <code>Custom DNS</code>, and add the values found in AWS on individual lines.</p>

<h3 id="managing-an-email-inbox">Managing an email inbox</h3>

<p>To be able to send and receive emails, an email server needs to get the emails. There are a couple of alternatives to achieving this, one being hosting your own server, which I didn’t go for initially for simplicity. I eventually want to handle my emails through Gmail, and given that, it seems like there are two options to go for:</p>
<ul>
  <li>Signing up for Gsuite to register a custom domain.</li>
  <li>Buying Privateemail from Namecheap and handle that through Gmail.</li>
</ul>

<p>The former option has been discouraged from, since that is more of an option for companies and not private persons, and will disable certain features from your Google apps. This being the case, I went for the latter option.</p>

<h3 id="sending-emails-to-namecheap-privateemail">Sending emails to Namecheap Privateemail</h3>

<p>Privateemail can be set up through Namecheap for the domain in question, after which we need to make sure that email reaches the server by setting up records in the hosted zone pointing to the email server on Namecheap. According to <a href="https://www.namecheap.com/support/knowledgebase/article.aspx/1340/2176/namecheap-private-email-records-for-domains-with-thirdparty-dns">Namecheaps guide</a>, the following records need to be set up.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Type</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><em>Leave blank</em></td>
      <td style="text-align: left"><code>MX</code></td>
      <td><code>10 mx2.privateemail.com</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>Leave blank</em></td>
      <td style="text-align: left"><code>MX</code></td>
      <td><code>10 mx1.privateemail.com</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>Leave blank</em></td>
      <td style="text-align: left"><code>TXT</code></td>
      <td><code>v=spf1 include:spf.privateemail.com ~all</code></td>
    </tr>
    <tr>
      <td style="text-align: left">mail</td>
      <td style="text-align: left"><code>CNAME</code></td>
      <td><code>privateemail.com</code></td>
    </tr>
    <tr>
      <td style="text-align: left">autodiscover</td>
      <td style="text-align: left"><code>CNAME</code></td>
      <td><code>privateemail.com</code></td>
    </tr>
    <tr>
      <td style="text-align: left">autoconfig</td>
      <td style="text-align: left"><code>CNAME</code></td>
      <td><code>privateemail.com</code></td>
    </tr>
    <tr>
      <td style="text-align: left">_autodiscover._tcp</td>
      <td style="text-align: left"><code>CNAME</code></td>
      <td><code>0 0 443 privateemail.com</code></td>
    </tr>
  </tbody>
</table>

<p>The <code>MX</code> records will point out where the mail server is located, and the other ones should be optional, but are encouraged.</p>

<p>Allowing up to 1 hour for the records to take effect might be needed, before moving on to the next step</p>

<h3 id="handle-email-from-gmail">Handle email from Gmail</h3>

<p>Last step is to let Gmail manage the email settings. This is thoroughly explained step by step <a href="https://www.namecheap.com/support/knowledgebase/article.aspx/9188/2175/google-mail-fetcher-setup-for-namecheap-private-email">here</a>, but here is a quick walkthrough. In your Gmail account, and go to <code>Settings</code> &gt; <code>Accounts and Import</code> &gt;  <code>Add a mail account</code>. In the popup, step by step:</p>
<ol>
  <li>Enter your custom email address</li>
  <li>Your Privateemail username/password, <code>mail.privateemail.com</code> for POP Server and use port 995</li>
  <li>Tick that you want to be able to send email as well</li>
  <li>Add the same custom email address</li>
  <li>Use <code>mail.privateemail.com</code> as SMTP server, your username/password, port 465, and use SSL.</li>
  <li>Fill in the verification code that you should have received from Gmail in the Privateemail account.</li>
</ol>

<p>After this step, Gmail should be able to handle sending/receiving emails from a custom domain!</p>

<h3 id="dns-records-and-what-they-are-used-for">DNS records and what they are used for.</h3>

<p>This is a brief explanation of the records that are used in this post.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Record</th>
      <th style="text-align: left">Value</th>
      <th style="text-align: left">What it does</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>NS</code></td>
      <td style="text-align: left">Name Server</td>
      <td style="text-align: left">The server to use to get info about hosts in this zone</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>MX</code></td>
      <td style="text-align: left">Mail eXchange</td>
      <td style="text-align: left">Points to the location for a server handling email</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>TXT</code></td>
      <td style="text-align: left">TeXT</td>
      <td style="text-align: left">Arbitrary text record for human readable text</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>CNAME</code></td>
      <td style="text-align: left">Canonical NAME</td>
      <td style="text-align: left">An alias for another domain name</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>SRV</code></td>
      <td style="text-align: left">SeRVice</td>
      <td style="text-align: left">Defines host/port for the specified service</td>
    </tr>
  </tbody>
</table>

  </div>

</article>

    </div>
  </body>
  <script type="text/javascript" src="/assets/style-f3e45cdff3f5c1acf9c5f29d53e9c79f134aee5f86ee1475762d989eefd040b9.js"></script>
</html>
